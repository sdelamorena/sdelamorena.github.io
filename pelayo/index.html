<!doctype html>
<html lang="es" data-bs-theme="auto">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pelayo</title>
    <!-- Stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/jquery-ui-1.10.0.custom.css">
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>  
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
		<script type="text/javascript">
		// Form 
    $(document).ready(function(){
      $("#form-submit").click(function(e){
          // Pending button
          $("#form-submit").attr({"disabled": "false", "value": "Generando archivos..."});
          $(".progress-bar-zip").css({"width": "60%"});
          // Finished button
          $.post("https://eocfiew5x2hxtym.m.pipedream.net", $("#form").serialize(), function(result){
            if(result){
              $("#form-submit").attr({"disabled": "false", "value": "Finalizado"});
              $(".progress-bar-zip").css({"width": "100%"});
              $(".dwn").attr("href", "https://pub-4fc588ccc60240bea3d2b60ed13022bd.r2.dev/" + result + ".zip").removeClass("disabled");
            } 
          });
          // Archive item
          var newitem = $('#add').val();
          var uniqid = Math.round(new Date().getTime() + (Math.random() * 10));
            $('#list').append('<li id="' + uniqid + '" class="list-group-item">' 
            + ' ' + time + ' '
            + '<span class="badge badge-primary">N2</span> <span class="badge badge-warning">CNP V-082</span> ' 
            + '<a href="" class="btn btn-outline-dark btn-sm dwn" role="button" aria-pressed="true">Descargar <i class="bi bi-arrow-down-circle"></i></a>' + ' '
            + '<button type="button" class="btn btn-outline-dark btn-sm listelement" data-id="' + uniqid + '"><i class="bi bi-x-circle"></i></button>'
            + '<input type="hidden" name="listed[]" value="' + newitem + '"></li>');
            $('#add').val('');
          return false;
        });
        // Reset button
        jQuery(".btn-reset").click(function (e) {
            e.preventDefault();
            jQuery("#form")[0].reset();
            // Regrets values
            jQuery("#hijode, #domicilio, #ordinal").val("");
            jQuery("#noaportahijode, #noaportadomicilio, #noid").removeClass("active");
            jQuery("#form-submit").attr({"value": "Generar"}).removeAttr("disabled");
            jQuery(".progress-bar-zip").removeAttr("style");
            // Default values
            document.getElementById("horaderechos").value = time;
            document.getElementById("horadetencion").value = time;
            document.getElementById("instructor").value = "130.301"; 
        });
        // Trash button
        jQuery(".btn-trash").on("click", function () {
            jQuery(".duplicate").val("");
        });       
        // Horaderechos time
        const now = new Date(Date.now());
        const time = now.getHours() + ":" + (now.getMinutes() < 10 ? "0" : "") + now.getMinutes();
        // Default items
        document.getElementById("horaderechos").value = time;
        document.getElementById("horadetencion").value = time;
        document.getElementById("instructor").value = "130.301"; 
        // Capitalize
        jQuery("#nombre").keyup(function() {
          var caps = jQuery("#nombre").val(); 
          caps = caps.charAt(0).toUpperCase() + caps.slice(1);
          jQuery("#nombre").val(caps);
        });
        // Name duplicate
        jQuery("#domicilio").keyup(function() {
          var caps = jQuery("#domicilio").val();
          jQuery(".duplicate").val(caps);
        });
        // Police uppercase
        jQuery(".uppercase").keyup(function() {
          jQuery(this).val(jQuery(this).val().toUpperCase());
        });
        // Docs disabled
        jQuery("#documento").on("click", function () {
          jQuery(".doc-field").css({"background-color":"", "cursor":"text"});
          var numerodoc = jQuery(this).children(":selected").attr("id");
          jQuery("#numerodoc").prop("name", numerodoc);
        });
        // NI button
        jQuery("#noid").on("click", function () {
          jQuery("#ordinal").prop("name", "ordinalnoid"); 
          jQuery("#ordinal").attr("value", "N/I");
          jQuery(this).addClass("active"); 
        });
        // NA button
        jQuery("#noaportahijode, #noaportadomicilio").on("click", function () {
          var inputClass = $(this).attr("class").split(" ")[2];
          jQuery("#" + inputClass).attr("value", "NO APORTA"); 
          jQuery(this).addClass("active"); 
        });
        // Autocomplete fields
        jQuery(function() {
          var autoComplete = ['Afganistán','Albania','Alemania','Andorra','Angola','Antigua y Barbuda','Arabia Saudita','Argelia','Argentina','Armenia','Australia','Austria','Azerbaiyán','Bahamas','Bangladés','Barbados','Baréin','Bélgica','Belice','Benín','Bielorrusia','Birmania','Bolivia','Bosnia y Herzegovina','Botsuana','Brasil','Brunéi','Bulgaria','Burkina Faso','Burundi','Bután','Cabo Verde','Camboya','Camerún','Canadá','Catar','Chad','Chile','China','Chipre','Ciudad del Vaticano','Colombia','Comoras','Corea del Norte','Corea del Sur','Costa de Marfil','Costa Rica','Croacia','Cuba','Dinamarca','Dominica','Ecuador','Egipto','El Salvador','Emiratos Árabes Unidos','Eritrea','Eslovaquia','Eslovenia','España','Estados Unidos','Estonia','Etiopía','Filipinas','Finlandia','Fiyi','Francia','Gabón','Gambia','Georgia','Ghana','Granada','Grecia','Guatemala','Guyana','Guinea','Guinea ecuatorial','Guinea-Bisáu','Haití','Honduras','Hungría','India','Indonesia','Irak','Irán','Irlanda','Islandia','Islas Marshall','Islas Salomón','Israel','Italia','Jamaica','Japón','Jordania','Kazajistán','Kenia','Kirguistán','Kiribati','Kuwait','Laos','Lesoto','Letonia','Líbano','Liberia','Libia','Liechtenstein','Lituania','Luxemburgo','Madagascar','Malasia','Malaui','Maldivas','Malí','Malta','Marruecos','Mauricio','Mauritania','México','Micronesia','Moldavia','Mónaco','Mongolia','Montenegro','Mozambique','Namibia','Nauru','Nepal','Nicaragua','Níger','Nigeria','Noruega','Nueva Zelanda','Omán','Países Bajos','Pakistán','Palaos','Palestina','Panamá','Papúa Nueva Guinea','Paraguay','Perú','Polonia','Portugal','Reino Unido','República Centroafricana','República Checa','República de Macedonia','República del Congo','República Democrática del Congo','República Dominicana','República Sudafricana','Ruanda','Rumanía','Rusia','Samoa','San Cristóbal y Nieves','San Marino','San Vicente y las Granadinas','Santa Lucía','Santo Tomé y Príncipe','Senegal','Serbia','Seychelles','Sierra Leona','Singapur','Siria','Somalia','Sri Lanka','Suazilandia','Sudán','Sudán del Sur','Suecia','Suiza','Surinam','Tailandia','Tanzania','Tayikistán','Timor Oriental','Togo','Tonga','Trinidad y Tobago','Túnez','Turkmenistán','Turquía','Tuvalu','Ucrania','Uganda','Uruguay','Uzbekistán','Vanuatu','Venezuela','Vietnam','Yemen','Yibuti','Zambia','Zimbabue','Álava','Albacete','Alicante','Almería','Asturias','Ávila','Badajoz','Barcelona','Burgos','Cáceres','Cádiz','Cantabria','Castellón','Ciudad Real','Córdoba','La Coruña','Cuenca','Gerona','Granada','Guadalajara','Guipúzcoa','Huelva','Huesca','Islas Baleares','Jaén','León','Lérida','Lugo','Madrid','Málaga','Murcia','Navarra','Orense','Palencia','Las Palmas','Pontevedra','La Rioja','Salamanca','Segovia','Sevilla','Soria','Tarragona','Santa Cruz de Tenerife','Teruel','Toledo','Valencia','Valladolid','Vizcaya','Zamora','Zaragoza'];
          const autoCompleteUpper = autoComplete.map(name => name.toUpperCase());
        jQuery(".autocomplete").autocomplete({
          source: autoCompleteUpper,
          autoFocus: true
        });
        // Archive list
        jQuery("#list").delegate(".listelement", "click", function() {
          var elemid = $(this).attr("data-id");
          jQuery("#" + elemid).remove();
        });
      });
    });
 		</script>
</head>
  <body class="bg-body-tertiary">
    <div class="container">
      <main>
        <!-- Header -->
        <div class="py-3 text-center"></div>
        <!-- Body -->
        <div class="row g-5">
          <div class="col-md-12 col-lg-12">
            <h4 class="mb-3">Ingreso detenido <button type="button" class="btn btn-outline-secondary btn-reset btn-sm"><i class="bi bi-arrow-clockwise"></i></button></h4>           
            <!-- Acta Header -->
            <h6>Datos del acta de información de derechos <span class="badge badge-primary">N2</span></h6>         
            <form method="post" id="form" class="mb-2">
              <div class="form-row">
                <div class="form-group col-md-2 mb-2">
                  <div class="input-group mb-0">
                    <div class="input-group-prepend">
                      <div class="input-group-text"><i class="bi bi-clock"></i></div>
                    </div>
                    <input type="text" class="form-control" placeholder="Hora de la hoja de derechos" id="horaderechos" name="horaderechos">
                  </div>
                </div>
                <div class="form-group col-md-6 mb-2">
                  <div class="input-group mb-2">
                    <div class="input-group-prepend">
                      <div class="input-group-text"><i class="bi bi-people-fill"></i></div>
                    </div>
                    <input type="text" class="form-control" placeholder="Funcionarios que han procedido a la detención" name="funcionarios">
                  </div>
                </div>   
                <div class="form-group col-md-4 mb-2">
                  <div class="input-group mb-2">
                    <div class="input-group-prepend">
                      <div class="input-group-text"><i class="bi bi-car-front-fill"></i></div>
                    </div>
                    <select class="custom-select" name="cuerpo">
                      <option selected value="PN">PN</option>
                      <option value="PMM">PMM</option>
                    </select>
                    <input type="text" class="form-control uppercase" placeholder="Indicativo" name="indicativo">
                  </div>
                </div>
                <!-- Tabs -->
                <div class="form-group col-md-12 mb-0">
                  <ul class="nav nav-tabs mb-2" id="Tab" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="det1-tab" data-bs-toggle="tab" data-bs-target="#det1" type="button" role="tab" aria-controls="det1" aria-selected="true">Detenido 1</button>
                    </li>
                    <!--<li class="nav-item" role="presentation">
                      <button class="nav-link" id="det2-tab" data-bs-toggle="tab" data-bs-target="#det2" type="button" role="tab" aria-controls="det2" aria-selected="false">Detenido 2</button>
                    </li>-->
                  </ul>
                  <!-- Tab content -->
                  <div class="tab-content" id="TabContent">
                    <div class="tab-pane fade show active" id="det1" role="tabpanel" aria-labelledby="det1-tab">
                      <div class="form-row">
                        <div class="form-group col-md-4 mb-2">  
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-person-fill"></i></div>
                            </div>
                            <input type="text" class="form-control" placeholder="Nombre" id="nombre" name="nombre">
                          </div>
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-people-fill"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase" placeholder="Apellidos" name="apellidos">
                          </div>
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-person-fill-up"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase" placeholder="Hijo/a de" id="hijode" name="hijode">
                            <button type="button" class="btn btn-outline-secondary hijode" id="noaportahijode">N/A</button>
                          </div> 
                          <div class="input-group mb-0">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-person-vcard"></i></div>
                            </div>
                            <select class="custom-select" id="documento">
                              <option id="dninie">DNI/NIE</option>
                              <option id="psp">Pasaporte español</option>
                              <option id="otrodoc">Otro documento</option>
                              <option id="INDOCUMENTADO" selected>Indocumentado</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group col-md-4 mb-2">
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-flag-fill"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase autocomplete" placeholder="Nacionalidad" name="nacionalidad">
                          </div>
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-house-fill"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase autocomplete" placeholder="Lugar de nacimiento" name="lugarnacimiento">
                          </div>
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-calendar3"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase" placeholder="Fecha de nacimiento" name="fechanacimiento">
                          </div>
                          <div class="input-group mb-0">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-person-vcard"></i></div>
                            </div>
                            <input type="text" style="background-color:#e9ecef;cursor:default;" class="form-control doc-field" placeholder="Número de documentación" id="numerodoc" name="indocumentado">
                          </div>
                        </div>
                        <div class="form-group col-md-4 mb-2">
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-house-fill"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase autocomplete" placeholder="Prov/País" name="provpais">
                          </div>
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-person-circle"></i></div>
                            </div>
                            <select class="custom-select" name="sexo">
                              <option selected value="MASCULINO">Masculino</option>
                              <option value="FEMENINO">Femenino</option>
                            </select>
                          </div>   
                        </div>
                        <div class="form-group col-md-12 mb-0">
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-building-fill"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase" placeholder="Domicilio" id="domicilio" name="domicilio">
                            <button type="button" class="btn btn-outline-secondary domicilio" id="noaportadomicilio">N/A</button>
                          </div>
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-file-earmark-fill"></i></div>
                            </div>
                            <input type="text" class="form-control uppercase" placeholder="Motivo de la detención" name="motivo">
                          </div>         
                        </div>
                        <!-- Amarilla Cabecera -->
                        <div class="form-group col-md-4 mb-2">
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-database-fill-up"></i></div>
                            </div>
                            <select class="custom-select" name="plantillaresena">
                              <option selected value="BPPC Madrid - Sector V">BPPC-SECTOR V</option>
                              <option value="BPPC Madrid - Grupo Noches">BPPC-GRUPO NOCHES</option>
                              <option value="BPPC Madrid">BPPC</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group col-md-4 mb-2">
                          <div class="input-group mb-0">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-database-fill"></i></div>
                            </div>
                            <input type="text" class="form-control" placeholder="Nº de ordinal" id="ordinal" name="ordinal">
                            <button type="button" class="btn btn-outline-secondary" id="noid" value="noid">N/I</button>
                          </div> 
                        </div>
                        <div class="form-group col-md-4 mb-2"> 
                          <div class="input-group mb-0">
                            <div class="input-group-prepend">
                              <div class="input-group-text"><i class="bi bi-person-badge"></i></div>
                            </div>
                            <input type="text" class="form-control" placeholder="Instructor" id="instructor" name="instructor">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="det2" role="tabpanel" aria-labelledby="det2-tab">
                      ...
                    </div>
                  </div>    
                </div>                                        
                <!-- Elementos esenciales -->
                <div class="form-group col-md-12 mb-0">
                  <h6>Datos de los elementos esenciales de las actuaciones <span class="badge badge-primary">N2</span></h6> 
                </div>
                <div class="form-group col-md-2 mb-0">
                  <div class="input-group mb-0">
                    <div class="input-group-prepend">
                      <div class="input-group-text"><i class="bi bi-clock"></i></div>
                    </div>
                    <input type="text" class="form-control" placeholder="Hora detención" name="horadetencion" id="horadetencion">
                  </div>
                </div>
                <div class="form-group col-md-10 mb-0">
                  <div class="input-group mb-2">
                    <div class="input-group-prepend">
                      <div class="input-group-text"><i class="bi bi-house-lock-fill"></i></div>
                    </div>
                    <input type="text" class="form-control uppercase duplicate" placeholder="Lugar de la detención" name="lugardetencion">
                    <button type="button" class="btn btn-trash btn-outline-secondary"><i class="bi bi-trash"></i></button>
                  </div>
                </div>
                <div class="form-group col-md-12 mb-2">
                  <div class="input-group mb-2">
                    <textarea class="form-control" placeholder="Breve resumen de los hechos" rows="3" name="hechos"></textarea>
                  </div>  
                </div>    
              </div>
              <div class="table-responsive">
                <table class="table table-striped mb-0">
                  <tbody>
                    <tr>
                      <td>
                        <div class="container">
                          <div class="row">
                            <div class="col-8" style="padding: 7px;">
                              <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated progress-bar-zip" role="progressbar"></div>
                              </div>
                            </div>
                            <div class="col-2">
                              <input type="submit" class="btn btn-primary btn-sm btn-block" role="button" aria-pressed="true" id="form-submit" value="Generar" />
                            </div>
                            <div class="col-2">
                              <a href="" class="btn btn-primary btn-sm dwn disabled" style="width: 100%;" role="button" aria-pressed="true">Descargar <i class="bi bi-arrow-down-circle"></i></a>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div> 
            </form>
            <form id="form-list">
              <div class="form-group">
                <ul id="list" class="list-group"></ul>
              </div>
            </form>
          </div>
        </div>
      </main>
      <footer class="text-body-secondary text-center text-small">
        <hr> 
        <p>@sdelamorena - 2024</p>
      </footer>
    </div>
</html>